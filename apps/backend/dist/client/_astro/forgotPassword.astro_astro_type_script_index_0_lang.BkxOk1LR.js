import{B as u}from"./endpoints.QH1VciTq.js";import{c}from"./notificiation.DyHDLNjw.js";import{k as p}from"./index.B9b1t7QR.js";const i=document.querySelector("#forgot-password-form"),a=document.querySelector("#email"),m=document.querySelector("#submit-button"),f=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,o={isEmailValid:!1};function d(e,t){t?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function l(){const{isEmailValid:e}=o;m.disabled=!e}a.addEventListener("input",()=>{const e=f.test(a.value);o.isEmailValid=e,d(a,e),l()});i.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:t}=o;if(t)try{await p.post(`${u}/api/email`,{json:{email:a.value}});for(const r in o)o[r]=!1;i.reset(),[a,passwordInput,verifyPasswordInput].forEach(r=>{d(r)}),o.isEmailValid=!1,i.reset(),d(a),l(),c({title:"Correo enviado!",description:"Revisa tu bandeja de entrada para restablecer tu contraseña.",type:"success"})}catch(r){let s="No se pudo enviar el correo de recuperación.";if(r.response){const n=r.response.headers.get("content-type");n&&n.includes("application/json")?s=(await r.response.json()).error??s:s="El servidor respondió con un error inesperado. Por favor, inténtalo de nuevo más tarde."}c({title:"Ups! Hubo un error",description:s,type:"error"})}});
