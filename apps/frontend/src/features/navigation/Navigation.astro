---
import dientelimpioLogo from '../../assets/dientelimpio.png';
---

<nav class="bg-white shadow-md py-4 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center px-4 max-w-6xl">
        <div class="flex items-center space-x-2">
            <img src={dientelimpioLogo.src} alt="dientelimpio" class="h-12">
            <a href="/" class="text-lg font-semibold text-blue-700">sonrisa Perfecta</a>
        </div>
        <ul class="hidden md:flex items-center space-x-8">
            <li><a href="/" class="text-gray-700 hover:text-blue-600 font-medium py-2 block transition duration-300">Inicio</a></li>
            <li class="relative group">
                <a href="/servicios" class="flex items-center text-gray-700 hover:text-blue-600 font-medium py-2 transition duration-300 dropbtn">
                    Servicios <i class="fas fa-caret-down ml-2 transition-transform duration-300 group-hover:rotate-180"></i>
                </a>
                <div class="absolute hidden group-hover:block bg-white shadow-lg rounded-md min-w-[220px] py-2 mt-1 z-10 animate-fade-in origin-top">
                    <a href="/servicios/#odontologia-general" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Odontología General</a>
                    <a href="/servicios/#estetica-dental" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Estética Dental</a>
                    <a href="/servicios/#implantes-dentales" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Implantes Dentales</a>
                    <a href="/servicios/#ortodoncia" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Ortodoncia</a>
                    <a href="/servicios/#endodoncia" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Endodoncia</a>
                    <a href="/servicios/#periodoncia" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Periodoncia</a>
                    <a href="/servicios/#odontopediatria" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm whitespace-nowrap transition duration-300">Odontopediatría</a>
                </div>
            </li>
            <li><a href="/#nosotros" class="text-gray-700 hover:text-blue-600 font-medium py-2 block transition duration-300">Nuestro Equipo</a></li>
            <li><a href="/galeria" class="text-gray-700 hover:text-blue-600 font-medium py-2 block transition duration-300">Galería</a></li>
            <li><a href="/#testimonios" class="text-gray-700 hover:text-blue-600 font-medium py-2 block transition duration-300">Testimonios</a></li>
        </ul>
        <div class="hidden md:block">
            <a href="/login" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-5 rounded-md transition duration-300 transform hover:-translate-y-0.5">Inicio de Sesión</a>
        </div>
        <div class="md:hidden text-blue-600 text-2xl cursor-pointer" id="menu-toggle">
            <i class="fas fa-bars"></i>
        </div>

        <ul id="mobile-nav-links" class="hidden md:hidden absolute top-full left-0 w-full bg-white shadow-lg py-4 text-center border-t border-gray-200">
            <li><a href="index.html" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium transition duration-300">Inicio</a></li>
            <li class="relative group-mobile">
                <a href="/servicios/servicios.html" class="flex items-center justify-center px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium transition duration-300 dropbtn-mobile">
                    Servicios <i class="fas fa-caret-down ml-2 transition-transform duration-300"></i>
                </a>
                <div class="hidden bg-gray-50 py-2 w-full">
                    <a href="/servicios/servicios.html#odontologia-general" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Odontología General</a>
                    <a href="/servicios/servicios.html#estetica-dental" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Estética Dental</a>
                    <a href="/servicios/servicios.html#implantes-dentales" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Implantes Dentales</a>
                    <a href="/servicios/servicios.html#ortodoncia" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Ortodoncia</a>
                    <a href="/servicios/servicios.html#endodoncia" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Endodoncia</a>
                    <a href="/servicios/servicios.html#periodoncia" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Periodoncia</a>
                    <a href="/servicios/servicios.html#odontopediatria" class="block px-8 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 text-sm transition duration-300">Odontopediatría</a>
                </div>
            </li>
            <li><a href="#nosotros" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium transition duration-300">Nuestro Equipo</a></li>
            <li><a href="/galeria" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium transition duration-300">Galería</a></li>
            <li><a href="#testimonios" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 hover:text-blue-600 font-medium transition duration-300">Testimonios</a></li>
            <li><a href="/login/login.html" class="inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-5 rounded-md transition duration-300">Inicio de Sesión</a></li>
        </ul>
</nav>

<script>
  // @ts-nocheck
  import AuthModule, {user} from '../auth/auth.module';
  import { getLinks } from "./navigation.utils";
  const navLinksDiv = document.querySelector('#nav-links'); 
  const navUserName = document.querySelector('#nav-user-name');
  const logoutBtn = document.querySelector('#logout-btn');
  const pathname = location.pathname;
  const links = getLinks(pathname);

  links.forEach(link => {
    if (link.type === 'button') {
      const btn = document.createElement('button');
      btn.addEventListener('click', link.handler);
      btn.innerHTML = link.text;
      navLinksDiv.append(btn)
    } else {
      const a = document.createElement('a');
      a.href = link.path;
      a.setAttribute('class', 'hidden md:block text-white no-underline hover:underline');
      a.innerHTML = link.text;
      navLinksDiv.append(a);
    }
  });

  user.subscribe(user => {
    if (!user) return;
    const userName = user.email.split('@')[0];
    navUserName.innerHTML = `Bienvenido ${userName}`;
  });
  
</script>